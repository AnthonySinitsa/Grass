#pragma kernel CSMain

struct GrassBlade
{
    float3 position;
};

RWStructuredBuffer<GrassBlade> grassBuffer;

int fieldSize;

[numthreads(10, 1, 1)]
void CSMain(uint3 id : SV_DispatchThreadID)
{
    if (id.x >= (uint)(fieldSize * fieldSize)) return;

    GrassBlade blade;

    int x = id.x % fieldSize;
    int z = id.x / fieldSize;

    blade.position = float3((float)x + 0.5, 0.5, (float)z + 0.5);

    grassBuffer[id.x] = blade;
}